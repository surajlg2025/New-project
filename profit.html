<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Profit Calculator | Sahifasal</title>

<style>


*{
margin:0;
padding:0;
box-sizing:border-box;
font-family:Segoe UI;
}

body{
background:linear-gradient(135deg,#020617,#064e3b);
color:white;
overflow-x:hidden;
}


.topbar{
position:fixed;
top:0;
left:0;
width:100%;
height:65px;
background:#022c22;
display:flex;
align-items:center;
padding:0 20px;
box-shadow:0 2px 10px black;
z-index:1000;
}

.menu-btn{
font-size:30px;
cursor:pointer;
margin-right:10px;
}

.logo-area{
display:flex;
align-items:center;
gap:10px;
}

.logo img{
height:60px;
}



.sidebar{
position:fixed;
top:65px;
left:-230px;
width:230px;
height:100%;
background:#021a14;
padding-top:20px;
transition:.4s;
z-index:2000;
}

.sidebar.active{
left:0;
}

.sidebar a{
display:block;
padding:14px 20px;
color:white;
text-decoration:none;
transition:.3s;
}

.sidebar a:hover{
background:#065f46;
padding-left:28px;
}



.main{
margin-top:80px;
padding:30px;
}



.card{
background:#1e293b;
padding:25px;
border-radius:12px;
box-shadow:0 10px 25px rgba(0,0,0,0.5);
max-width:600px;
margin:auto;
}

.card h2{
text-align:center;
margin-bottom:20px;
}



input,select{
width:100%;
padding:12px;
margin:10px 0;
border:none;
border-radius:6px;
background:#0f172a;
color:white;
}



button{
width:100%;
padding:12px;
background:#22c55e;
border:none;
border-radius:6px;
font-weight:bold;
cursor:pointer;
transition:.3s;
}

button:hover{
background:#16a34a;
transform:scale(1.03);
}

/* RESULT */

.result{
margin-top:20px;
text-align:center;
font-size:20px;
color:#4ade80;
}



footer{
text-align:center;
margin-top:40px;
padding:15px;
background:#020617;
color:#94a3b8;
}

</style>
</head>

<body>


<div class="topbar">

<div class="menu-btn" onclick="toggleSidebar()">â˜°</div>

<div class="logo-area">
<div class="logo">
<img src="final logo.png">
</div>
<h3>Sahifasal</h3>
</div>

</div>



<div class="sidebar" id="sidebar">
<a href="dashboard.html">ğŸ  Dashboard</a>
<a href="climate.html">ğŸŒ¦ Climate Intelligence</a>
<a href="market.html">ğŸ“Š Market Demand</a>
<a href="risk.html">âš  Risk Analysis</a>
<a href="planner.html">ğŸ—“ Smart Planner</a>
<a href="profit.html">ğŸ’° Profit Calculator</a>
<a href="profile.html">ğŸ‘¤ Profile</a>
<a href="govt.html">ğŸ› Govt Schemes</a>
<a href="index.html">ğŸšª Logout</a>
</div>



<div class="main">

<div class="card">

<h2>ğŸ’° Crop Profit Calculator</h2>

<label>Select Crop</label>
<select id="crop">
<option value="Soybean">Soybean</option>
<option value="Wheat">Wheat</option>
<option value="Maize">Maize</option>
</select>

<label>Expected Yield (Quintal)</label>
<input type="number" id="yield" placeholder="Example: 20">

<label>Total Farming Cost (â‚¹)</label>
<input type="number" id="cost" placeholder="Example: 15000">

<button onclick="calculateProfit()">Calculate Profit</button>

<div class="result" id="profitResult">
Estimated Profit will appear here
</div>

</div>

</div>

<footer>
Â© 2026 Sahifasal | Smart Agriculture Platform
</footer>


<script>

function toggleSidebar(){
document.getElementById("sidebar").classList.toggle("active");
}

async function calculateProfit(){

const crop = document.getElementById("crop").value.toLowerCase();
const yieldQty = Number(document.getElementById("yield").value);
const cost = Number(document.getElementById("cost").value);

if(!yieldQty || !cost){
alert("Please enter yield and cost");
return;
}

const url =
"https://api.data.gov.in/resource/9ef84268-d588-465a-a308-a864a43d0070?api-key=579b464db66ec23bdd000001e367c7882834471d76c5d2beb0b65d56&format=json&limit=100";

try{

const response = await fetch(url);
const data = await response.json();

let prices = [];


data.records.forEach(item=>{

const apiCrop = item.commodity.toLowerCase();

if(
(crop==="soybean" && apiCrop.includes("soy")) ||
(crop==="wheat" && apiCrop.includes("wheat")) ||
(crop==="maize" && (apiCrop.includes("maize") || apiCrop.includes("corn") || apiCrop.includes("makka")))
){
prices.push(Number(item.modal_price));
}

});

if(prices.length === 0){
alert("No price found for this crop currently");
return;
}

/* Take average mandi price */
const avgPrice =
prices.reduce((a,b)=>a+b,0) / prices.length;

const profit = (avgPrice * yieldQty) - cost;

document.getElementById("profitResult").innerHTML =
`âœ… Estimated Profit: â‚¹ ${Math.round(profit).toLocaleString()}
<br><small>Average Market Price: â‚¹ ${Math.round(avgPrice)}/quintal</small>`;

}
catch(err){
console.log(err);
alert("API failed to load");
}

}

</script>


</body>
</html>
